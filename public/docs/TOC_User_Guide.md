# QuickOutline 目录编辑指南

QuickOutline 支持灵活的目录（TOC）编辑。通过简单的语法，您可以精确控制目录页上显示的文字，以及点击该行后实际跳转的目标页面。

## 1. 基础格式
一行标准的目录项由 **标题**、**分隔符** 和 **页码信息** 组成：

```text
第一章 简介 ... 1
第二章 快速开始 ... 5
附录 A ... iv
```

*   **分隔符**：输入三个或更多连续的点（`...`）。编辑器会自动将其美化为右对齐的点状引导线。
*   **页码信息**：位于分隔符右侧的内容，决定了显示的文字和跳转的目标。

---

## 2. 默认跳转逻辑（无 `|` 语法时）
如果您只在分隔符右侧输入内容（如 `... 5`），系统会自动执行以下“自动识别”逻辑：

### 2.1 匹配规则
*   **纯数字（如 5）**：
    1.  **标签优先**：首先尝试查找 PDF 内部是否有名为 "5" 的页面标签。
    2.  **逻辑回退**：如果没找到标签，则按逻辑页码计算：`跳转目标 = 输入的数字 + Offset`。
*   **非数字文本（如 iv）**：直接查找 PDF 内部对应的页面标签。

### 2.2 常用场景示例

**场景一：处理标准书籍（逻辑页码 + Offset）**
假设 PDF 有 2 页封面，正文第 1 页是文件物理第 3 页。
*   **设置**：底部状态栏 **Offset 设为 2**。
*   **编写**：
```text
第一章 简介 ... 1
第二章 快速开始 ... 5
```
*   **效果**：系统先查有名为"1"的标签吗？若无，则跳转到物理第 **1+2=3** 页。

**场景二：处理罗马数字前言（页面标签）**
假设 PDF 前言页印的是 `i`, `ii`... 且文件内已有对应的页面标签。
*   **编写**：
```text
前言 ... i
致谢 ... iii
```
*   **效果**：系统自动找到标签为 "i" 和 "iii" 的页面并跳转。

---

## 3. 自定义跳转目标 (`|` 语法)
如果您希望 **目录显示的文字** 与 **实际跳转的目标** 不同，或者默认的自动识别不符合需求，请使用竖线 `|` 分隔。

**格式：** `标题 ... 显示文字 | 跳转目标`

### 3.1 语法参考表

| 语法格式 | 示例 | 跳转逻辑说明 |
| :--- | :--- | :--- |
| **绝对物理页 (`#`)** | `#10` | **强制跳转**到 PDF 的绝对第 10 页。忽略 Offset，最精确。 |
| **强制逻辑页 (`p`)** | `p10` | **强制计算**逻辑页码：`10 + Offset`。跳过标签匹配。 |
| **显式标签匹配 (`"`)** | `"10` | **强制匹配** PDF 内部名为 "10" 的标签页。忽略 Offset。 |
| **TOC 内部跳转 (`toc:`)** | `toc:2` | 跳转到生成的目录页面本身的第 2 页。 |
| **自动识别** | `10` | 同上方默认规则（标签优先，其次逻辑）。 |

### 3.2 进阶场景示例

**示例 A：覆盖全局 Offset（使用 `#`）**
全局 Offset 设为了 2，但某一行需要精准跳到物理第 2 页，不符合 `+2` 的规律。
*   **编写**：
```text
版权页 ... 1 | #2
```
*   **效果**：显示 "1"，点击强制跳到物理第 2 页，忽略全局 Offset。

**示例 B：强制匹配页面标签（使用 `"`）**
设置了全局 Offset，但这一行希望直接精准匹配 PDF 内部名为 "10" 的标签页，防止系统误算为逻辑页。
*   **编写**：
```text
索引 ... 10 | "10
```
*   **效果**：显示 "10"，点击会寻找标签名为 "10" 的页面。

**示例 C：强制使用 Offset 计算（使用 `p`）**
假设 PDF 里碰巧有个标签叫 "20" 指向了错误的页，您希望强制使用 `Offset` 计算逻辑页。
*   **编写**：
```text
案例分享 ... 20 | p20
```
*   **效果**：显示 "20"，强制跳转目标为 `20 + Offset`。

**示例 D：多页目录内部跳转（使用 `toc:`）**
生成的目录很长，在目录第一页做一个链接跳转到目录的第三页。
*   **编写**：
```text
详细索引(续) ... 见目录 P3 | toc:3
```
*   **效果**：显示 "见目录 P3"，点击跳到目录本身的第 3 页。
