# QuickOutline 目录编辑指南

QuickOutline 支持灵活的目录（TOC）编辑。通过简单的语法，您可以精确控制目录页上显示的文字，以及点击该行后实际跳转的目标页面。

## 1. 基础格式
一行标准的目录项由 **标题**、**分隔符** 和 **页码信息** 组成：

```text
第一章 简介 ... 1
第二章 快速开始 ... 5
附录 A ... iv
```

*   **分隔符**：输入三个或更多连续的点（`...`）。编辑器会自动将其美化为右对齐的点状引导线。
*   **页码信息**：位于分隔符右侧的内容，决定了显示的文字和跳转的目标。

---

## 2. 默认跳转逻辑（无 `|` 语法时）
如果您只在分隔符右侧输入内容（如 `... 5`），系统会自动执行以下“智能匹配”逻辑：

### 2.1 匹配规则
*   **逻辑页码（纯数字）**：优先应用 **Offset**。
    *   若 Offset ≠ 0：跳转目标 = `输入的数字 + Offset`。
    *   若 Offset = 0：优先查找 PDF 页面标签，找不到则回退到物理页码。
*   **页面标签（非数字文本）**：直接查找 PDF 内部对应的页面标签（如罗马数字 `iv`）。**注意：非数字内容不受 Offset 影响。**

### 2.2 常用场景示例

**场景一：处理标准书籍（逻辑页码 + Offset）**
假设 PDF 有 2 页封面，正文第 1 页是文件物理第 3 页。
*   **设置**：底部状态栏 **Offset 设为 2**。
*   **编写**：
```text
第一章 简介 ... 1
第二章 快速开始 ... 5
```
*   **效果**：目录显示 "1" 和 "5"，点击后分别跳转到物理第 **3** 页和第 **7** 页。

**场景二：处理罗马数字前言（页面标签）**
假设 PDF 前言页印的是 `i`, `ii`... 且文件内已有对应的页面标签。
*   **编写**：
```text
前言 ... i
致谢 ... iii
```
*   **效果**：系统自动找到标签为 "i" 和 "iii" 的页面并跳转，即使设置了 Offset 也不受影响。

---

## 3. 自定义跳转目标 (`|` 语法)
如果您希望 **目录显示的文字** 与 **实际跳转的目标** 不同，请使用竖线 `|` 分隔。

**格式：** `标题 ... 显示文字 | 跳转目标`

### 3.1 语法参考表

| 语法格式 | 示例 | 跳转逻辑说明 |
| :--- | :--- | :--- |
| **逻辑页码** | `1` | 默认格式。跳转目标：`1 + Offset`。 |
| **绝对物理页 (`#`)** | `#10` | **强制跳转**到 PDF 的绝对第 10 页。忽略 Offset，最精确。 |
| **显式标签匹配 (`@`)** | `@5` | **强制匹配** PDF 内部名为 "5" 的标签页。忽略 Offset。 |
| **TOC 内部跳转 (`toc:`)** | `toc:2` | 跳转到生成的目录页面本身的第 2 页。 |

### 3.2 进阶场景示例

**示例 A：覆盖全局 Offset（使用 `#`）**
全局 Offset 设为了 2，但某一行需要精准跳到物理第 2 页，不符合 `+2` 的规律。
*   **编写**：
```text
版权页 ... 1 | #2
```
*   **效果**：显示 "1"，点击强制跳到物理第 2 页，忽略全局 Offset。

**示例 B：强制匹配页面标签（使用 `@`）**
设置了全局 Offset，但这一行希望直接精准匹配 PDF 内部名为 "10" 的标签页，而不是跳到 `10 + Offset`。
*   **编写**：
```text
索引 ... 10 | @10
```
*   **效果**：显示 "10"，点击会寻找标签名为 "10" 的页面，无视 Offset。

**示例 C：自定义显示文本（使用逻辑页码）**
您希望目录显示文字“查看案例”，但跳转目标仍想利用 Offset 自动计算第 20 页的位置。
*   **编写**：
```text
案例分享 ... 查看案例 | 20
```
*   **效果**：显示 "查看案例"，跳转目标为 `20 + Offset`。

**示例 D：多页目录内部跳转（使用 `toc:`）**
生成的目录很长，在目录第一页做一个链接跳转到目录的第三页。
*   **编写**：
```text
详细索引(续) ... 见目录 P3 | toc:3
```
*   **效果**：显示 "见目录 P3"，点击跳到目录本身的第 3 页。
