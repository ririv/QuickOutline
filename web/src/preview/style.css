body {
    /*background-color: #525659; !* PDF 阅读器经典深灰背景 *!*/
    background-color: #e3e4ea;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100vh;
    overflow: hidden; /* 禁用 Body 滚动，完全交给 Viewport */
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    user-select: none; /* 防止拖拽时选中文本干扰体验 */
}

/* --- 2. 悬浮工具栏 (胶囊样式 + 毛玻璃) --- */
#toolbar-container {
    position: fixed;
    bottom: 30px; /* 悬浮在底部，不遮挡顶部内容 */
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    z-index: 1000;
    pointer-events: none; /* 让容器本身不挡鼠标 */
}

#toolbar {
    pointer-events: auto; /* 让工具栏内部可点击 */
    background-color: rgba(0, 0, 0, 0.75); /* 半透明黑 */
    backdrop-filter: blur(10px); /* 毛玻璃效果 */
    padding: 8px 20px;
    border-radius: 50px; /* 胶囊圆角 */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    gap: 15px;
    color: #fff;
    transition: opacity 0.3s;
}

/* 圆形图标按钮 */
.icon-btn {
    background: transparent;
    border: 1px solid transparent;
    color: rgba(255, 255, 255, 0.85);
    width: 28px;
    height: 28px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    font-weight: bold;
    line-height: 1;
    padding: 0;
}
.icon-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
}
.icon-btn:active {
    background: rgba(255, 255, 255, 0.2);
    transform: scale(0.95);
}

/* 缩放数值标签 */
#zoom-label {
    font-size: 14px;
    font-variant-numeric: tabular-nums; /* 数字等宽，防止跳动 */
    min-width: 45px;
    text-align: center;
    color: #fff;
}

/* 文字按钮 (Reset) */
.text-btn {
    background: #1677ff;
    border: none;
    color: white;
    border-radius: 4px;
    padding: 4px 8px;
    font-size: 12px;
    cursor: pointer;
    margin-left: 5px;
    font-family: inherit;
}
.text-btn:hover { background: #4096ff; }
.text-btn:active { background: #0958d9; }

/* --- 3. Ant Design 风格滑动条 (CSS Magic) --- */
input[type=range] {
    -webkit-appearance: none; /* 清除默认样式 */
    width: 120px;
    height: 4px; /* 轨道高度 */
    background: transparent;
    cursor: pointer;
    outline: none;
    margin: 0;
}

/* 轨道 (Track) - 动态背景色由 JS 变量 --percent 控制 */
input[type=range]::-webkit-slider-runnable-track {
    width: 100%;
    height: 4px;
    border-radius: 2px;
    background: linear-gradient(to right, #1677ff 0%, #1677ff var(--percent), #5e5e5e var(--percent), #5e5e5e 100%);
}

/* 滑块 (Thumb) */
input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    height: 14px;
    width: 14px;
    border-radius: 50%;
    background: #ffffff;
    border: 2px solid #1677ff; /* 蓝色边框 */
    margin-top: -5px; /* 垂直居中修正: (轨道4 - 滑块14) / 2 */
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transition: transform 0.1s;
}

/* 滑块交互效果 */
input[type=range]:hover::-webkit-slider-thumb {
    transform: scale(1.2);
    box-shadow: 0 0 0 3px rgba(22, 119, 255, 0.2); /* 蓝色光晕 */
}
input[type=range]:active::-webkit-slider-thumb {
    transform: scale(1.2);
    box-shadow: 0 0 0 5px rgba(22, 119, 255, 0.3);
}

/* --- 4. 视口与内容 (虚拟渲染核心 CSS) --- */
#viewport {
    width: 100%;
    height: 100%;
    overflow: auto; /* 滚动条在这里产生 */
    display: block;
    text-align: center; /* 让内部的 inline-block 容器居中 */
    will-change: scroll-position; /* 提示浏览器优化滚动性能 */
}

#pages-container {
    display: inline-block; /* 紧贴内容宽度，配合 text-align center */
    padding: 40px 0 100px 0; /* 上下留白 */
    /* 注意：这里移除了 transition，因为 zoom 属性通常不通过 transition 动画 */

    /* 使用 CSS 变量或 JS 控制 zoom */
    transform-origin: top center;
}

.page-wrapper {
    background: white;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4); /* 立体阴影 */
    margin-bottom: 20px; /* 页间距 */
    /* 默认尺寸，会被 JS 动态覆盖 */
    width: 595pt;
    height: 842pt;
    display: flex; /* 消除图片底部间隙 */

    /* 【性能关键】CSS 隔离 */
    /* 告诉浏览器：这个元素的内部布局与外部无关 */
    /* 当我们频繁操作 innerHTML 时，这能防止全局重排 (Reflow) */
    contain: content;

    /*开启层级合成 (Layer Compositing)*/
    transform: translate3d(0, 0, 0);
    will-change: transform;
    /* 相对定位，为了让内部图片绝对定位重叠 */
    position: relative;
    overflow: hidden;
}

/* 图片样式 */
svg {
    display: block;
    width: 100%;
    height: 100%;
    pointer-events: auto; /* 只有可见时才响应鼠标 */

    /* 1. 形状渲染：优化速度 */
    /* 默认是 geometricPrecision (精度优先)，改为 optimizeSpeed 可能有锯齿，但滚动更快 */
    /* 建议：平时用 auto，如果滚动极卡，可以尝试改为 optimizeSpeed */
    shape-rendering: auto;

    /* 2. 文本渲染：我们之前设为了 geometricPrecision 以保位置准确 */
    /* 千万别改这个，改了会导致文字错位 */
    text-rendering: geometricPrecision;

    /* 3. 显卡加速提示 */
    /* 告诉浏览器这个 SVG 不需要复杂的合成运算 */
    mix-blend-mode: normal;

    /*svg的动画渐入由于是操作dom，而我们操作的又是整页，所以会出现白屏闪烁，因此就不用加渐入动画*/
}



img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: contain;

    position: absolute;
    top: 0;
    left: 0;

    /* 【修正】移除过时的私有属性 */
    /* 现代 WebKit 默认的缩放算法 (auto) 对于 High-DPI 图片缩小显示效果最佳 */
    /* 它会自动进行平滑插值，达到 Retina 屏幕般的清晰度 */
    image-rendering: auto;
    /* 或者显式指定高质量 (虽然 auto 通常就是这个效果) */
    /*image-rendering: high-quality;*/
}

/* --- 双缓冲通用类 (仅在启用时生效) --- */
.double-buffer .page-wrapper svg,
.double-buffer .page-wrapper img {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    transition: opacity 0.2s ease-in;
}

.double-buffer .page-wrapper .current {
    opacity: 1;
    z-index: 1;
}

.double-buffer .page-wrapper .preload {
    z-index: 2;
}